"use strict";"object"!=typeof window.CP&&(window.CP={}),window.CP.PenTimer={programNoLongerBeingMonitored:!1,timeOfLastCallToShouldStopLoop:0,loopIDs:[],possibleInfiniteLoops:0,firstCallToShouldStopLoop:0,MAX_INFINITE_LOOPS:1,START_MONITORING_AFTER:1500,STOP_ALL_MONITORING_TIMEOUT:4e3,shouldStopLoop:function(o){if(this.programKilledSoStopMonitoring)return!0;if(this.programNoLongerBeingMonitored)return!1;var t=this._getTime();if(0===this.timeOfLastCallToShouldStopLoop&&(this.timeOfLastCallToShouldStopLoop=t),0===this.firstCallToShouldStopLoop)return this.firstCallToShouldStopLoop=t,!1;var i=t-this.firstCallToShouldStopLoop;if(i<this.START_MONITORING_AFTER)return!1;if(i>this.STOP_ALL_MONITORING_TIMEOUT)return this.programNoLongerBeingMonitored=!0,!1;try{this._checkOnInfiniteLoop(o,t)}catch(n){return this._sendErrorMessageToEditor(),this.programKilledSoStopMonitoring=!0,!0}return!1},_sendErrorMessageToEditor:function(){try{if(this._shouldPostMessage()){var o={action:"infinite-loop",line:this._findAroundLineNumber()};parent.postMessage(JSON.stringify(o),"*")}else this._throwAnErrorToStopPen()}catch(t){this._throwAnErrorToStopPen()}},_shouldPostMessage:function(){return document.location.href.match(/boomerang/)},_throwAnErrorToStopPen:function(){throw"We found an infinite loop in your Pen. We've stopped the Pen from running. Please correct it or contact support@codepen.io."},_findAroundLineNumber:function(){var o=new Error,t=0;if(o.stack){var i=o.stack.match(/boomerang\/\S+\d+:(\d+):\d+/);i&&(t=i[1])}return t},_checkOnInfiniteLoop:function(o,t){if(this.loopIDs.push(o),this.loopIDs.length>5){if(this._foundRepeatingPatternInLoopIDs(this.loopIDs)){if(t-this.timeOfLastCallToShouldStopLoop<1){if(this.possibleInfiniteLoops+=1,this.possibleInfiniteLoops>this.MAX_INFINITE_LOOPS)throw"Infinite Loop found"}else this.possibleInfiniteLoops-=1;this.timeOfLastCallToShouldStopLoop=t}this.loopIDs=[]}},_foundRepeatingPatternInLoopIDs:function(o){return o[0]===o[3]&&o[1]===o[4]&&o[2]===o[5]},_getTime:function(){return+new Date}},window.CP.shouldStopExecution=function(o){return window.CP.PenTimer.shouldStopLoop(o)};